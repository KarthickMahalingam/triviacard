!function(r){function a(){var n=+r(this).attr("data-length"),a=+r(this).val().length,t=a<=n;r(this).parent().find('span[class="character-counter"]').html(a+"/"+n),s(t,r(this))}function t(n){var a=n.parent().find('span[class="character-counter"]');a.length||(a=r("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),n.parent().append(a))}function e(){r(this).parent().find('span[class="character-counter"]').html("")}function s(n,a){var t=a.hasClass("invalid");n&&t?a.removeClass("invalid"):n||t||(a.removeClass("valid"),a.addClass("invalid"))}r.fn.characterCounter=function(){return this.each(function(){var n=r(this);n.parent().find('span[class="character-counter"]').length||n.attr("data-length")!==undefined&&(n.on("input",a),n.on("focus",a),n.on("blur",e),t(n))})},r(document).on("ready turbolinks:load",function(){r("input, textarea").characterCounter()})}(jQuery);