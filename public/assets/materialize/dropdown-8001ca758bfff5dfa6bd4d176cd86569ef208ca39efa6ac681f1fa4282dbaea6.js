!function(D){D.fn.scrollTo=function(t){return D(this).scrollTop(D(this).scrollTop()-D(this).offset().top+D(t).offset().top),this},D.fn.dropdown=function(t){var n={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===t?(this.each(function(){D(this).trigger("open")}),!1):"close"===t?(this.each(function(){D(this).trigger("close")}),!1):void this.each(function(){function g(){v.data("induration")!==undefined&&(w.inDuration=v.data("induration")),v.data("outduration")!==undefined&&(w.outDuration=v.data("outduration")),v.data("constrainwidth")!==undefined&&(w.constrainWidth=v.data("constrainwidth")),v.data("hover")!==undefined&&(w.hover=v.data("hover")),v.data("gutter")!==undefined&&(w.gutter=v.data("gutter")),v.data("beloworigin")!==undefined&&(w.belowOrigin=v.data("beloworigin")),v.data("alignment")!==undefined&&(w.alignment=v.data("alignment")),v.data("stoppropagation")!==undefined&&(w.stopPropagation=v.data("stoppropagation"))}function i(t){"focus"===t&&(m=!0),g(),b.addClass("active"),v.addClass("active");var n=v[0].getBoundingClientRect().width;!0===w.constrainWidth?b.css("width",n):b.css("white-space","nowrap");var i=window.innerHeight,o=v.innerHeight(),e=v.offset().left,a=v.offset().top-D(window).scrollTop(),r=w.alignment,s=0,d=0,c=0;!0===w.belowOrigin&&(c=o);var u=0,l=0,f=v.parent();if(f.is("body")||(f[0].scrollHeight>f[0].clientHeight&&(u=f[0].scrollTop),f[0].scrollWidth>f[0].clientWidth&&(l=f[0].scrollLeft)),e+b.innerWidth()>D(window).width()?r="right":e-b.innerWidth()+v.innerWidth()<0&&(r="left"),a+b.innerHeight()>i)if(a+o-b.innerHeight()<0){var h=i-a-c;b.css("max-height",h)}else c||(c+=o),c-=b.innerHeight();if("left"===r)s=w.gutter,d=v.position().left+s;else if("right"===r){b.stop(!0,!0).css({opacity:0,left:0}),d=v.position().left+n-b.width()+(s=-w.gutter)}b.css({position:"absolute",top:v.position().top+c+u,left:d+l}),b.slideDown({queue:!1,duration:w.inDuration,easing:"easeOutCubic",complete:function(){D(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:w.inDuration,easing:"easeOutSine"}),setTimeout(function(){D(document).on("click."+b.attr("id"),function(){p(),D(document).off("click."+b.attr("id"))})},0)}function p(){m=!1,b.fadeOut(w.outDuration),b.removeClass("active"),v.removeClass("active"),D(document).off("click."+b.attr("id")),setTimeout(function(){b.css("max-height","")},w.outDuration)}var v=D(this),w=D.extend({},n,t),m=!1,b=D("#"+v.attr("data-activates"));if(g(),v.after(b),w.hover){var o=!1;v.off("click."+v.attr("id")),v.on("mouseenter",function(){!1===o&&(i(),o=!0)}),v.on("mouseleave",function(t){var n=t.toElement||t.relatedTarget;D(n).closest(".dropdown-content").is(b)||(b.stop(!0,!0),p(),o=!1)}),b.on("mouseleave",function(t){var n=t.toElement||t.relatedTarget;D(n).closest(".dropdown-button").is(v)||(b.stop(!0,!0),p(),o=!1)})}else v.off("click."+v.attr("id")),v.on("click."+v.attr("id"),function(t){m||(v[0]!=t.currentTarget||v.hasClass("active")||0!==D(t.target).closest(".dropdown-content").length?v.hasClass("active")&&(p(),D(document).off("click."+b.attr("id"))):(t.preventDefault(),w.stopPropagation&&t.stopPropagation(),i("click")))});v.on("open",function(t,n){i(n)}),v.on("close",p)})},D(document).on("ready turbolinks:load",function(){D(".dropdown-button").dropdown()})}(jQuery);